.solitary-header.sub-header.clearfix
  .button-bar.clearfix
    = render :partial => 'search'
    .admin-links
      = link_to 'all blocks', dust_blocks_path, :class => '', :title => "All Blocks"

.form-wrap.clearfix

  = form_for @block, :validations => true do |f|
    = hidden_field_tag :return, params[:return]
    = f.error_messages
    .fields
      .sub-header
        .title block fields
      .content-wrapper
        .item.block_title
          = f.label :title
          = f.text_field :title, :class => 'field'
        .item
          = f.label :where_to_show, "Where should I show up?"
          - @block.where_to_show.blank? ? selected = 'content' : selected = @block.where_to_show
          = f.select(:where_to_show, Dust::Block.regions, {:prompt => 'Where should I show up?', :selected => selected}, {:class => 'field'})
        .item
          = f.label :weight
          = f.number_field :weight, :class => 'field'
        .item
          = f.label :classes
          - @block.classes.blank? ? css_classes = 'twelve columns' : css_classes = @block.classes
          = f.text_field :classes, :value => css_classes, :class => 'field'
        .item
          %br/
          %strong= f.label :show,"What pages is this block visible on."
          %br/
          List Urls of pages this block should show up on. One per Line. If this area is blank the block will be visible on all pages.
          = f.text_area :show, :class => 'field'
        - if permitted_to? :manage, :blocks
          .item
            = f.label :partial_name, "Widget"
            = f.select :partial_name, Dust::Block.widget_list, {:include_blank => true}, {:class => 'field'}
        .item
          %p= f.submit

    .content-areas
      .sub-header
        .title block content
      .content-wrapper
        .item
          = f.label :body
          = f.cktext_area("body", :width => '100%', :height => '400px')
