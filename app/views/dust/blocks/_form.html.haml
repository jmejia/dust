= form_for @block, :validations => true do |f|
  = hidden_field_tag :return, params[:return]
  = f.error_messages
  .item.block_title
    = f.label :title
    %br/
    = f.text_field :title, :class => 'field'
  .item
    = f.label :body
    %br/
    = f.cktext_area("body", :width => '98%', :height => '400px')
  .item
    %br/
    - @block.where_to_show.blank? ? selected = 'content' : selected = @block.where_to_show
    = f.select(:where_to_show, Dust::Block.regions, {:prompt => 'Where should I show up?', :selected => selected}, {:class => 'field'})
  .item
    = f.label :weight
    %br/
    = f.number_field :weight, :class => 'field'
  .item
    = f.label :classes
    %br/
    - @block.classes.blank? ? css_classes = 'twelve columns' : css_classes = @block.classes
    = f.text_field :classes, :value => css_classes, :class => 'field'
  .item
    %strong= f.label :show,"What pages is this block visible on."
    %br/
    %p
      List Urls of pages this block should show up on. One per Line. If this area is blank the block will be visible on all pages.
    %br/
    = f.text_area :show, :class => 'field'
  - if permitted_to? :manage, :blocks
    .item
      = f.label :partial_name, "Widget"
      %br/
      = #f.text_field :partial_name, :class => 'field'
      = f.select :partial_name, Dust::Block.widget_list, {:include_blank => true}, {:class => 'field'}
  .item
    %p= f.submit
